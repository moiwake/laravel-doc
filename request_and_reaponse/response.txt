https://readouble.com/laravel/9.x/ja/responses.html



🟡レスポンス
HTTPメッセージ：クライアントとサーバー間で通信する際にやり取りされるデータの形式...HTTPプロトコルにおいて定義されている。
⇒①リクエスト　②レスポンス

【HTTPレスポンスメッセージの例】
HTTP/1.1 200 OK
Date: Sat, 01 Jan 2022 12:00:00 GMT
Content-Type: text/html; charset=utf-8
Content-Length: 1234
Connection: keep-alive

<!DOCTYPE html>
<html>
<head>...</head>
<body>...</body>
</html>

ステータスコード: 200 OK
HTTPプロトコルバージョン: HTTP/1.1
ヘッダー: レスポンスに関する追加情報
ボディ: HTMLコンテンツなど実際のリソースの内容



🔵ヘッダーの付加
header()、withHeader()

ガイド「レスポンスへのヘッダ付加」



🔵ウェブリソースのキャッシュ
クライアントやプロキシは一度取得したウェブリソース（例: HTMLページ、画像、スタイルシート、JavaScriptファイルなど）をキャッシュする
...一時的に保存し、将来のリクエストで再利用する。
⇒同じリソースに対する新たなリクエストが発生した際に、サーバーに再度リクエストを送信せずに、キャッシュから取得できる。

HTTPキャッシュはデフォルトで、どのクライアントに対してもキャッシュが行われるようになっている。

ー　キャッシュの制御
HTTPプロトコルでは、サーバーがキャッシュの動作指示をレスポンスヘッダーで行う。
クライアントやプロキシはこれに従ってリソースをキャッシュする。
⇒キャッシュの動作を変更するにはヘッダーを変更する必要がある。

・Cache-Control
・Expires
・ETag (Entity Tag)
・Last-Modified

※ルートグループへCache-Controlヘッダを簡単に指定できる方法がある。
ガイド「キャッシュコントロール・ミドルウェア」



🔵クッキー付加
ガイド「レスポンスへのクッキー付加」



🔵リダイレクト
ガイド「リダイレクト」

ー　フラッシュデータ（例：成功メッセージ）をセッションに保存する
with()
ガイド「フラッシュデータを保存するリダイレクト」

ー　入力をセッションに保存する
withInput()
ガイド「入力と共にリダイレクト」



🔵JSONレスポンス
json()
...自動的にContent-Typeヘッダをapplication/jsonにセットし、
同時に指定された配列をjson_encodeメソッド（データをJSON形式の文字列に変換するPHPの関数）でJSONへ変換する。

ー　JSONPレスポンス
...ブラウザの同一オリジンポリシー（Same-Origin Policy）によるセキュリティ制約を回避するための手法で、
クロスドメインな環境でのデータの受け渡しに使用される。

JSONPレスポンスの生成...json()、withCallback（）

ガイド「JSONレスポンス」



🔵Fileの表示
file()
ガイド「Fileレスポンス」



🔵Fileをダウンロードさせるレスポンス
ファイルダウンロードを強制するレスポンスを生成できる

ガイド「Fileダウンロード」



🔵レスポンスをカスタマイズする

ー　レスポンスそのものをカスタマイズする
レスポンスマクロを使用する
...HTTPヘッダーやステータスコードの変更、特定のデータ形式への変換など複雑なカスタム処理に使用される。

ガイド「レスポンスマクロ」

ー　JSONレスポンスの整形
Resourceクラスを使用する
...JSONデータの構造や形式を制御し、必要なフィールドだけを含めたり、リレーションシップを正確に表現したりするのに使用される。



🔵Viewレスポンス
ガイド「Viewレスポンス」



🔵ルート内での定義
ガイド「レスポンスの生成」



🔵レスポンスのインスタンスに使えるメソッド
Illuminate\Http\Client\Responseのインスタンスに使えるメソッド

ガイド「HTTPクライアント：リクエストの作成」
https://readouble.com/laravel/9.x/ja/http-client.html
