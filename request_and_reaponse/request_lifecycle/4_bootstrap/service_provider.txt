https://readouble.com/laravel/9https://readouble.com/laravel/9.x/ja/providers.html

ðŸŸ¡ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¨ã¯
â‘ ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã«ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç™»éŒ²ã™ã‚‹ã‚¯ãƒ©ã‚¹ï¼ˆä¾å­˜æ€§æ³¨å…¥ï¼‰
â‘¡èµ·å‹•å‰ã«å¿…è¦ãªã‚¿ã‚¹ã‚¯ã‚’ã®å®Ÿè¡Œï¼ˆåˆæœŸåŒ–ï¼‰

â€»ã»ã¨ã‚“ã©ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ã¯ã€ã™ã¹ã¦ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§å¿…ãšãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã¨ã¯é™ã‚‰ãšã€å®Ÿéš›ã«å¿…è¦ãªã¨ãã«ã®ã¿ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã€‚ï¼ˆã€Œé…å»¶ã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ï¼‰



ðŸ”µã‚µãƒ¼ãƒ“ã‚¹ã¨ã¯

Laravelã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§æä¾›ã•ã‚Œã‚‹ç‰¹å®šã®å½¹å‰²ã‚„æ©Ÿèƒ½ã‚’æ‹…å½“ã™ã‚‹ã‚¯ãƒ©ã‚¹ã‚„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â‡’ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã«ç™»éŒ²ã™ã‚‹ã“ã¨ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§åˆ©ç”¨å¯èƒ½ã«ãªã‚‹ã€‚

ä¾‹ï¼‰Databaseã‚µãƒ¼ãƒ“ã‚¹ï¼ˆDB::table('users')ï¼‰ã‚„ã€Mailã‚µãƒ¼ãƒ“ã‚¹

ãƒ¼ã€€ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
ã‚µãƒ¼ãƒ“ã‚¹ã¯é€šå¸¸ã€ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ã¨ã—ã¦ã‚³ãƒ³ãƒ†ãƒŠã«ç™»éŒ²ã•ã‚Œã‚‹ã€‚
â‡’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§ä¸€åº¦ã ã‘ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒä½œæˆã•ã‚Œã€ãã®å¾Œã¯åŒã˜ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå†åˆ©ç”¨ã•ã‚Œã‚‹ã€‚
â‡’ãƒªã‚½ãƒ¼ã‚¹ã®åŠ¹çŽ‡çš„ãªåˆ©ç”¨ã‚„ä¾å­˜é–¢ä¿‚ã®ä¸€è²«æ€§ãŒç¢ºä¿ã•ã‚Œã‚‹ã€‚



ðŸ”µã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒ†ãƒŠ
ã‚¯ãƒ©ã‚¹é–“ã®ä¾å­˜ã‚’ç®¡ç†ã™ã‚‹å¼·åŠ›ãªç®¡ç†ãƒ„ãƒ¼ãƒ«
â‡’ã‚³ãƒ³ãƒ†ãƒŠã«ã‚¯ãƒ©ã‚¹ã‚„ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç™»éŒ²ã™ã‚‹ã¨ã€ä¾å­˜æ€§æ³¨å…¥ã«ã‚ˆã‚‹ä¾å­˜æ€§ã®è§£æ±ºã‚’è‡ªå‹•çš„ã«è¡Œãˆã‚‹

â‡’ã€€ðŸŸ¡service_container



ðŸ”µã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ãƒ­ãƒ¼ãƒ‰
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ–ãƒ¼ãƒˆã‚¹ãƒˆãƒ©ãƒƒãƒ—ãƒ•ã‚§ãƒ¼ã‚ºã§è¡Œã‚ã‚Œã‚‹å‡¦ç†ã®ï¼‘ã¤ã«ã€ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ç™»éŒ²ãƒ»èµ·å‹•ãŒã‚ã‚‹ã€‚

Illuminate/Foundation/Http/Kernel.phpã®bootstrapãƒ¡ã‚½ãƒƒãƒ‰ã§ã€
$bootstrappersã«å«ã¾ã‚Œã‚‹ãƒ–ãƒ¼ãƒˆã‚¹ãƒˆãƒ©ãƒƒãƒ—ã‚¯ãƒ©ã‚¹ã®bootstrapãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€€â‡’ã€€ðŸŸ¡bootstrapã€€ðŸ”µå®Ÿè¡Œ

$bootstrappersã«ã¯ã€\Illuminate\Foundation\Bootstrap\RegisterProviders::classãŒå«ã¾ã‚Œã‚‹ã€‚



ðŸ”µã‚µãƒ¼ãƒ“ã‚¹ã®ç™»éŒ²
RegisterProvidersã‚¯ãƒ©ã‚¹ã®bootstrapãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã£ã¦ã€config/app.phpã®providersé…åˆ—ã«å«ã¾ã‚Œã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãŒ
ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã«ç™»éŒ²ã•ã‚Œã‚‹ã€‚

ãƒ¼ã€€Illuminate/Foundation/Bootstrap/RegisterProviders.php

public function bootstrap(Application $app)
{
    $app->registerConfiguredProviders();
}

ãƒ¼ã€€Illuminate/Foundation/Application.php

public function registerConfiguredProviders()
{
    $providers = Collection::make($this->config['app.providers'])ã€€ã€€config/app.phpã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’å–å¾—
                    ->partition(function ($provider) {
                        return strpos($provider, 'Illuminate\\') === 0;
                    });

    $providers->splice(1, 0, [$this->make(PackageManifest::class)->providers()]);

    (new ProviderRepository($this, new Filesystem, $this->getCachedServicesPath()))
                ->load($providers->collapse()->toArray());ã€€ã€€ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç™»éŒ²ï¼ˆå„ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¯ãƒ©ã‚¹ã®registerãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹ï¼‰
}



ðŸ”µã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•
ãƒ¼ã€€Illuminate/Foundation/Bootstrap/BootProviders.php
public function bootstrap(Application $app)
{
    $app->boot();
}



ðŸ”µã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®å®šç¾©
https://readouble.com/laravel/9https://readouble.com/laravel/9.x/ja/providers.html
ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ã®è¨˜è¿°

ãƒ¼ã€€ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒã‚¤ãƒ³ãƒ‰ï¼ˆregisterãƒ¡ã‚½ãƒƒãƒ‰ï¼‰
ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã«ã‚¯ãƒ©ã‚¹ã‚„ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç™»éŒ²ã™ã‚‹ã“ã¨

public function register()
{
    $this->app->bind(SomeClass::class, function ($app) {
        return new SomeClass();
    });
}

ãƒ¼ã€€åˆæœŸåŒ–å‡¦ç†ã®å®šç¾©ï¼ˆbootãƒ¡ã‚½ãƒƒãƒ‰ï¼‰
boot ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒç™»éŒ²ã•ã‚Œã€ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã«ã‚µãƒ¼ãƒ“ã‚¹ãŒãƒã‚¤ãƒ³ãƒ‰ã•ã‚ŒãŸå¾Œã«å‘¼ã³å‡ºã•ã‚Œã‚‹ãƒ¡ã‚½ãƒƒãƒ‰

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒžã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œã€ãƒ«ãƒ¼ãƒˆã®ç™»éŒ²ã€ã‚¤ãƒ™ãƒ³ãƒˆã®è³¼èª­ã€æ§˜ã€…ãªåˆæœŸåŒ–å‡¦ç†ãªã©ã€
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã™ã‚‹å‰ã«å®Ÿè¡Œã•ã‚Œã‚‹ã¹ãã‚¿ã‚¹ã‚¯ã‚’å®šç¾©ã™ã‚‹ã€‚



ðŸŸ¢ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨
appãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ã‚„ã‚³ãƒ³ãƒ†ãƒŠã®makeãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—ã™ã‚‹

$instance = app(SomeClass::class);
$dependency = app(SomeDependency::class);
$instance->someMethod($dependency);
