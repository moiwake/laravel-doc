https://readouble.com/laravel/9.x/ja/artisan.html



🟡Artisan
...Laravelのコマンドラインインターフェイス

アプリケーションのルート（app/artisan）にartisanスクリプトとして存在している。



🔵使用可能なコマンドの確認

ー　全コマンド
php artisan list

ー　コマンドのオプション
php artisan help migrate
⇒migratgeに使えるオプションが見れる



🔵コマンドの作成
ガイド「コマンド記述」

ー　クロージャーによるコマンド作成
クロージャーが簡単なコマンドの作成もできる
ガイド「クロージャコマンド」

ー　コマンド実行時に、ユーザーが入力する値があるとき
signatureプロパティを定義する
ガイド「入力期待値の定義」

ー　実行中の挙動を制御
ガイド「コマンドI／O」

・ユーザー入力の値を取得する
・ユーザーに質問する
・コンソールに出力する
・タスクの進捗度を表示する

ー　他のコマンドを呼び出す
ガイド「他コマンドからのコマンド呼び出し」

ー　コマンドの登録
ガイド「コマンド登録」

ー　シグナル（例：ctr+C⇒中断）が送信されたときの処理
シグナルが送信されたときに実行したい処理を定義できる。
ガイド「シグナルの処理」



🔵コマンド実行のイベントを利用する
実行開始、直前、終了時のイベントが送信される
⇒そのタイミングで行われる処理を追加できる。

ガイド「イベント」



🔵tinker
ガイド「Tinker（REPL）」

ー　ジョブのディスパッチ
dispatchヘルパとDispatchableクラスのdispatchメソッドは、
ジョブをキューに投入するのにガベージコレクションへ依存している。
⇒Bus::dispatchまたはQueue::pushを使用してディスパッチする必要がある。

ー　artisanコマンドの実行
artisanコマンドの実行もできる
実行できるコマンドはデフォルトでは、clear-compiled、down、env、inspire、migrate、optimize、up
※追加したいときはtinker.phpのcommands配列に追加する

ー　エイリアスを付けたくないクラスの設定
tinkerでは、自動でエイリアスが付く（App\Models\User::class　⇒　User）
付けたくないときはtinker.phpのdont_aliasに追加が必要



🔵コマンドが複数回実行されるのを防ぐ
ガイド「単一インスタンスコマンド」

❗この機能を利用するには、アプリケーションでmemcached、redis、dynamodb、database、file、arrayキャッシュドライバを
アプリケーションのデフォルトキャッシュドライバとして使用する必要がある。
さらに、すべてのサーバから同一のセントルキャッシュサーバと通信する必要がある。



🔵コンソールの外でコマンドを実行
Artisanファサードのcallメソッドを使用
Artisan::call('コマンド');

ガイド「プログラムからのコマンド実行」



🔵makeコマンドで作成されるファイルのカスタマイズ
makeコマンド
...スタブと呼ばれるテンプレートファイルをもとに、さまざまなクラスを作成する。
(スタブに生成されるクラスの骨格や初期内容が定義されている。)

ー　スタブファイルのカスタマイズ
php artisan stub:publish

ガイド「スタブのカスタマイズ」
